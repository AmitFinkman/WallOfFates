<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wall of Fates [VIEWER]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Rubik:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .card {
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0.5rem;
        }
        .card-face-back {
            transform: rotateY(180deg);
            background-color: #4a5568;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-7xl mx-auto">

        <div id="game-screen">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-white" style="font-family: 'Rubik', sans-serif;">Wall of Fates</h1>
                 <div>
                    <button id="fullscreen-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition mr-2">Full Screen</button>
                </div>
            </div>

            <div class="mb-6">
                 <p class="text-center text-gray-400 mb-3">Game in Progress</p>
                 <div id="team-color-palette" class="flex justify-center items-center flex-wrap gap-4 p-2 rounded-lg bg-gray-900/50">
                    </div>
            </div>

            <div id="game-grid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4">
                </div>
        </div>

    </div>

    <script>
        // NOTE FOR REAL-TIME SYNC:
        // This viewer page would connect to a server (e.g., WebSocket) and listen for updates.
        // When the manager makes a move, the server sends the new gameData to all viewers.
        // The renderBoard function below is then called with the new data to refresh the screen.

        // --- DOM Elements ---
        const teamColorPalette = document.getElementById('team-color-palette');
        const gameGrid = document.getElementById('game-grid');
        const fullscreenBtn = document.getElementById('fullscreen-btn');

        // --- Sample Game State ---
        // In a real app, this mockGameState would be received from a server.
        // To test this page, you can manually edit this data.
        const mockGameState = {
            colors: ['#4f46e5', '#db2777', '#d97706', '#16a34a'],
            data: [
                { entry: 1, secret: 200, color: '#4f46e5', isFlipped: true },
                { entry: 2, secret: 100, color: '#db2777', isFlipped: false },
                { entry: 3, secret: 1000, color: '#d97706', isFlipped: true },
                { entry: 4, secret: 0, color: null, isFlipped: false },
                { entry: 5, secret: 150, color: '#16a34a', isFlipped: false },
                { entry: 6, secret: 300, color: '#4f46e5', isFlipped: false },
                { entry: 7, secret: 400, color: null, isFlipped: false },
                { entry: 8, secret: 500, color: '#db2777', isFlipped: true },
                { entry: 9, secret: 100, color: null, isFlipped: false },
                { entry: 10, secret: 0, color: '#d97706', isFlipped: false },
                { entry: 11, secret: 200, color: '#16a34a', isFlipped: true },
                { entry: 12, secret: 150, color: null, isFlipped: false }
            ]
        };

        /**
         * Renders the entire game board based on a state object.
         * @param {object} state - The game state containing colors and card data.
         */
        function renderBoard(state) {
            gameGrid.innerHTML = '';
            teamColorPalette.innerHTML = '';

            // Render the color palette (display only)
            state.colors.forEach(color => {
                const colorDiv = document.createElement('div');
                colorDiv.className = 'palette-color w-10 h-10 rounded-md';
                colorDiv.style.backgroundColor = color;
                teamColorPalette.appendChild(colorDiv);
            });

            // Render the game grid cards
            state.data.forEach(item => {
                const cardContainer = document.createElement('div');
                cardContainer.className = 'aspect-square relative';

                const card = document.createElement('div');
                card.className = 'card w-full h-full';
                if (item.isFlipped) {
                    card.classList.add('is-flipped');
                }
                
                // Front of the card
                const cardFront = document.createElement('div');
                cardFront.className = 'card-face card-face-front';
                cardFront.style.backgroundColor = item.color || '#374151'; // Use team color or default gray
                cardFront.innerHTML = <span class="text-4xl font-bold text-white">${item.entry}</span>;
                
                // Back of the card
                const cardBack = document.createElement('div');
                cardBack.className = 'card-face card-face-back';
                cardBack.innerHTML = <span class="text-4xl font-bold text-white">${item.secret}</span>;
                
                card.appendChild(cardFront);
                card.appendChild(cardBack);
                cardContainer.appendChild(card);
                gameGrid.appendChild(cardContainer);
            });
        }
        
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.error(Error attempting to enable full-screen mode: ${err.message} (${err.name}));
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
        
        // --- Initial Load ---
        window.addEventListener('load', () => {
            renderBoard(mockGameState);
        });
        
        fullscreenBtn.addEventListener('click', toggleFullScreen);

        // In a real application, the WebSocket listener would look like this:
        /*
        const socket = new WebSocket('wss://your-server.com');
        socket.onmessage = function(event) {
            const latestGameState = JSON.parse(event.data);
            renderBoard(latestGameState);
        };
        */
    </script>
</body>
</html>
